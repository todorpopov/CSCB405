# Моделиране на данните. Архитекруа и компоненти на СУБД

## Моделиране на данните
- Модел на данните - съвкупност от абстрактни понятия, чрез които се описват свойствата на разработваното приложение

- Всяко приложение притежава
    - Статични свойства - задават се чрез обекти със съответни атрибути, като се описват взаимодействията между тях.
    - Динамични свойства - определят се от операциите върху обектите с техните атрибути и връзки между тях.
    - Ограничения за цялостност.

- Моделиране на данните - процес, при който на всяко приложение се съпоставя представяне на свойствата и изискванията към обработките.

- За да се опише структурата на базата се използва модел на данните.

- Компоненти на модела на данните
    - Понятия или конструкции (обект, запис, таблица) - описват структурата на базата от данни.
    - Ограничения
    - Операции - описват обработките върху базата с помощта на понятията от модела

- Схема - представя описание на базата от данни - структура, типове на данните, ограничения.

- Състояние - конкретните данни в базата във всеки един момент от времето

- Всеки модел осигурява
    - Език за дефиниране на данните - DDL
    - Език за обработка на данните - DML

## Класификцаия на моделите
- Групи модели на данните
    - Физически - вътрешни, примитивни
    - Класически - логически, имплементационни - йерархичен, мрежов, релационен
    - Обектно-базирани - използват структури, които са интуитивно близко до потребителя - "понятие-връзка", семантичен, функционален, обектно-ориентиран, обектно-релационен
    - Самоописващи се - комбинират описанието на данните с техните стойности - XML, key-value, NoSQL

- Концептуално моделиране - процес на изграждане на база от данни, независимо от начина на нейното реализиране

## Архитектура на СУБД
- Главна цел на подхода "бази от данни" - разделяне на потребителските приложения от физическата база (независимост на данните)

- Целта се постига чрез представяне на три нива (които определят и архитектурата да СУБД)
    - Вътрешно - организирането на данните върху физическата среда за съхранение
        - физическо представяне на базата в компютъра
        - описва съхранението на базата
    - Концептуално - моделирането на данните като типове обекти и връзки между тях
        - пълна схема на базата
        - описва какви данни се съхраняват в базата и взаимодействията между тях
    - Външно - интерпретирането на данните от различни потребителски групи
        - обхваща потребителските представи за базата
        - описва частта от базата, с която работи даден потребител

- Още цели на архитектурата на три нива
    - АБД трябва да може да променя структурата за съхранение на базата без това да влияе върху потребителските представи
    - Вътрешната структура на базата трябва да не зависи от физическите характеристики на паметта.
    - АВБ трябва да може да променя концептуалната структура на базата без това да пречи на работата на потребителите.
    - Всички потребители достъпват еднакви данни.
    - Отделната потребителска представа е защитена от промени въвеждани в останалите представи.
    - Потребителите не трябва да знаят как се съхраняняват данните върху физическите носители.

- Независимост на данните - възможност да се променя схемата на едно ниво на системата, без това да налага промяна в схемите на останалите по-високи нива

- Два вида независимост на данните
    - логически - възможността да се променя концептуалната схема без да се налагат промени във външната схема или в приложните програми
    - физическа - възможността да се променя вътрешната схема без това да води во промени в концептуалната или външната схема

- Независимостта на данните е основната разлика между файлово-базираните системи и приложенията, използващи "бази от данни"

- Архитектурата на три нива осигурява
    - Достъп на всички потребители до едни и същи данни
    - Независимост на отделните потребителски представи една от друга
    - Защита на потребителите от грижи за физическата организация на базата
    - Възможност на АБД да променя структурите за съхранение на базата или логическата и структура без това да оказва влияние върху потребителските представи

## Езици и интерфейси за работа с базата
- Езици на СУБД
    - Език за дефиниране на данните - DDL - задава схемата
    - Език за обработване на данните - DML - чрез него се задават операциите

    - Видове DML
        - Непроцедурен - самостоятелен или в вграден в език за програмиране (SQL)
        - Процедурни - винаги се вгражда в език за програмиране

    - Интегриран език - SQL
    - Езици от четвърто ниво - 4GL

- Интерфейси на СУБД
    - Самостоятелни езици за заявки - SQL *Plus в ORACLE
    - Програмни интерфейси - езикът за обработка на базата е вграден в език за програмиране
        - вграждане на езика - SQLJ (Java)
        - извикване на процедури - JDBC, ODBC
        - език за програмиране в базата - PL/SQL

- Потребителски "дружелюбни" (user-friendly)
    - използващи меню за обхождане в web пространството
    - използващи форми
    - графични
    - на естествен език (заявки на английски)
    - комбинации

- Други типове интерфейси - от мобилно устройство, реч, web браузър

## Помощни средства
- За изпълняване на определени функции
    - зареждане на базата с данни съхранени във файлове
    - back up
    - реорганизиране структурата на файловете съхраняващи базата
    - генериране на отчети
    - следене на производителността
    - компресирана на данните

- За организиране на речник от данните

- Среди за разработване на приложения - PowerBuilder (Sybase), JBuilder (Embaracadero Technologies), JDeveloper 11G (Oracle)

## Функции на СУБД
- Съхраняване, извлизане, обновяване на данните
- Поддържане на достъпен за потребителя каталог.
- Управление на транзакции. 
- Управление на едновременния достъп.
- Въстановяване на базата.
- Управление на правата за достъп.
- Осигуряване независимост на данните.
- Поддържане на връзка с данните.
- Проверка на ограниченията за цялостност на данните.
- Предоставяне на помощни услуги.

## Каталог
- Представлява хранилище, в което се описват данните в базата
- Основен компонент на СУБД
- Съхраняват се
    - име, тип и размер на всяко поле
    - ограничения върху данните
    - имената на потребителите, които имат достъп до базата
    - статискита за използване на базата
    - тип на достъп до дадено поле

## Класификация на СУБД
- По модел на данните
    - legacy - йерархични, мрежови
    - използвани в момента - релационни, обектно-релационни, обектно-ориентирани
    - последни технологии - key-value, document-based, graph-based, native XML DBMSs

- По брой потребители - еднопотребителски, многопотребителски

- По начин на достъп - централизирани, разпределени

## Цени на СУБД
- Безплатни с отворен код - PostgreSQL, MySQL
- Търговски - хиляди долари

## История на моделите на данните
- Мрежов модел
    - Първата СУБД е реализирана от Honeywell през 1964-65 (IDS System).
    - Разработен е стандарт на мрежовия  модел -  CODASYL (Conference on Data Systems Languages) (CODASYL - DBTG report of 1971).
    - Реализиран в множество системи – IDMS. (Cullinet - понастоящем Computer Associates), DMS 1100 (Unisys), IMAGE (H.P. (Hewlett-Packard)), VAX -DBMS (Digital Equipment Corp., next COMPAQ, now H.P.).

    - Преимущества - могат да се моделират сложни връзки; езикът позволява навигация по базата (FIND, FIND member, FIND owner, FIND NEXT within set, GET)
    - Недостатъци - базата се обработва чрез програми; структурите за съхранение на базата участват при моделирането на връзкита; достъпът до записите се усъществява чрез множество от указатели

- Йерархичен
    - Реализиран съвместно от IBM и North American Rockwell около 1965 – резултат IMS.
    - IMS е използвана широко по света.
    - Йерархичният модел е формализиран на базата на системата IMS.
    - Други подобни системи: System 2k (SAS inc.)

    - Преимущества - лесно се представят йерархично организирани данни; някои задачи се реализират ефективно

    - Недостатъци - обработките стават чрез навигация пи базата; трудно приложим модел за бази, където връзките между записите не са йерархични; езикът е процедурен (използват се конструкии от вида GET, GET UNIQUE, GET NEXT, GET NEXT WITHIN PARENT)

- Релационен
    - Предложен през 1970 от E.F. Codd (IBM), първите търговски системи се появяват в началото на 80-те години.
    - Голяма част от СУБД са релационни: 
        - търговски продукти - DB2, ORACLE, MS SQL Server, SYBASE, INFORMIX
        - реализации с отворен код  - MySQL, PostgreSQL
    - Стандарти за SQL: SQL-86, SQL-89 (SQL1), SQL-92 (SQL2), SQL-99, SQL:2003, SQL:2006, SQL-2008,  SQL:2011.

- Обектно-ориентиран модел
    - Позволява използването на базите с обектно- ориентирани езици за програмиране. 
    - Позволява съхраняването на постоянни обекти, създадени чрез C++ (напр. OBJECTSTORE или VERSANT) и Smalltalk (напр. GEMSTONE).
    - Експериментални ОО СУБД:  O2, ORION, IRIS ..........
    - Разработени са стандарти за обектна база: ODMG-93, ODMG-version 2.0, ODMG-version 3.0.

- Обектно-релационен модел
    - Разширява се релационния модел с понятията от обектно ориентираните бази от данни.
    - Примери на СУБД: Oracle-11G, DB2, SQL Server
    - Стандарти: SQL-99, SQL-2008.
    - Тенденция: разширяване на релационните СУБД с възможности да обработват XML.
    - Терминът „обектно-релационен модел“ все по-рядко се използва на пазара.
