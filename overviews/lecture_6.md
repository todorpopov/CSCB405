# Концептуално моделиране

## Основни фази при проектиране на бази от данни
- Представени са две основни дейности:
    - проектиране на схемата на базата;
    - Проектиране на приложните програми.

## Концептуално моделиране при проектиране на бази от данни
- Цели
    - Да се създаде концептуална схема, която да отразява потребителски изискания!
    - Използва се някакъв концептуален модел  - например модел “понятие -взаимодействие” или E-R (entity-relationship) модел.

- Концептуален модел - множеството от понятия, с които се описва структурата на разработваната база от данни и свързаните с нея транзакции. 
- Главна цел при разработването на концептуален модел е да се отрази възможно най-добре потребителското възприемане на данните като същевременно се пренебрегва разглеждането на чисто технически аспекти, свързани с проектирането. 
- Концептуалният модел е независим от избраната СУБД или хардуерна платформа, с чиято помощ ще се извършва реализацията на базата. 
- В литературата се използва и терминът “семантично моделиране”, който има аналогично съдържание.

## Основни понятия при модела "обект-връзка"
- Обекти
    - Обект (entity) - основно понятие в модела на Чен:
        - произволен елемент от реалния свят, за който се пазят данни в базата;
        - “нещо, което може да се отличи и идентифицира”.
        - Примери: СЛУЖИТЕЛ “Иван Петров”, ОТДЕЛ “Продажби”
    - Обектите биват:
        - физически - МПС, човек, служител, студент.....
        - концептуални (абстрактни)- предприятие, университетски курс, банкова сметка...
    - Всеки обект притежава някакви свойства (properties), наречени атрибути (attributes) - описват неговите характеристики.
        - Пример: обектът "СЛУЖИТЕЛ" се описва от име, възраст, адрес, заплата, ЕГН, длъжност и т.н. 
    - Всеки атрибут за конкретния обект има стойност, която се съхранява в базата от данни. 

- Видове атрибути в E-R модела
    - Прости (simple) и съставни (сложни, composite) атрибути
        - Прости атрибути - неделими атрибути,  изградени от единствен компонент, който приема една атомарна стойност (пример – пол).
    - Сложни атрибути - атрибути, изградени от други атрибути, всеки от които има независимо значение, могат да образуват йерархия, стойността им е конкатенация от стойностите на изграждащите атрибути (пример – адрес).
    - Eдностойности (single-valued) и многостойностни (multi-valued) атрибути.
        - едностойностни - атрибути, които приемат единствена стойност за даден обект; 
        - многостойностни - атрибути, които могат да приемат множество от стойности, могат да имат долна и горна граница на стойностите.
    - Съхранявани (stored) и изчислими (derived) атрибути
        - изчислим  - атрибут, чиято стойност може да се пресметне от стойностите на други атрибути
        - съхраняван - атрибут, чиито стойности се записват директно в базата
        - Пример: атрибутите ЕГН, Рождена дата и Възраст на обекта "ЧОВЕК"   - ЕГН е съхраняван, а останалите могат да се приемат за изчислими

- Тип на обект - множество от обекти с еднакви атрибути.
    - Всеки тип на обект се описва от име и списък от атрибути.
    - Типът е шаблон, еднакъв за група от обекти със сходни характеристики.
    - Диаграмно се представя чрез правоъгълник. 

- Ограничения върху обектите от даден тип
    - Всеки тип на обект притежава ключ за идентифициране на отделните обекти. Ключът в E-R диаграмите е подчертан.
    - Ключът може да бъде изграден от няколко атрибута като комбинациите от техните стойности са уникални за съответните екземпляри. Тогава ключът се нарича съставен. 
    - Определянето на даден атрибут за ключ означава, че той приема различни стойности за произволно разширение на типа. 
    - Някои типове обекти притежават повече от един ключ. 

- Тип на връзка
    - Неформално, всяко състояние ri на типа връзка Ri представя факта, че екземплярите е1,е2,.....,еn са в някакво отношение помежду си, което моделира взаимодействието им в реалния свят. В диаграмите типът връзка се представя чрез ромб.
        - ПРИМЕР: Състояния на връзката “СЛУЖИТЕЛ <РАБОТИ_В> ОТДЕЛ”

- Степен на типа връзка
    - Степен на типа връзка R се нарича броят на участвуващите в нея типове обекти
    - Връзките могат да бъдат рекурсивни, двоични, троични и т.н.

- Роли
    - При рекурсивните връзки се налага да се въведат роли (roles) - отразяват взаимодействия между екземплярите на един и същ тип обект.
    - Пример: връзката “НАЧАЛНИК (1)– ПОДЧИНЕН(2)”, която показва взаимодействието между служителя и прекия му ръководител.

- Слаби типове обекти
    - Не притежават ключов атрибут. 
    - Техните екземпляри се идентифицират чрез свързването им с екземплярите на друг тип обект, което се осъществява чрез стойностите на даден атрибут. 
    - Съществуването на слабите типове обекти зависи от съществуването или наличието на други типове обекти, свързани с тях. 
    - На диаграмите слабите типове се представят чрез правоъгълник с двойна линия, а идентифициращата ги връзка – с двойно очертан ромб.

## Структурни ограничения
- Дефиниция - ограничения върху типовете връзки.  
- Характеристики:
    - ограничават възможни комбинации на обекти в отделните състояния на типовете връзки;
    - зависят от спецификата на приложението.
- Ограниченията върху даден тип връзка се определят от моделираните ситуации в реалния свят. 
- Ограниченията забраняват някои комбинации на участвуващите в състоянието на връзката екземпляри от отделните типове обекти.

- Два основни типа ограничения върху връзките:
    - Кардинално число или отношение за двоични връзки (cardinality ratio). 
        - Кардиналното число задава броя на състоянията на връзката, в които даден обект може да участвува; 
        - Двоичните връзки могат да бъдат с кардинално отношение 1:1, 1:N и M:N. 
    - Ограничение за участие върху всеки тип обект (participation constraint).
        - Определя дали съществуването на един тип обект зависи от това, че е свързан с друг тип обект чрез някакъв тип връзка. 
        - Бива: общо и частично.

- Общо, тотално ограничение за участие (total, или existence dependency).
    - Всеки представител на даден тип обект участвува в някакво състояние на определен тип връзка
    - На диаграмите това се бележи с двойна линия. 
    - Например участието на екземплярите на типа обект "СЛУЖИТЕЛ" в типа връзка "РАБОТИ-ЗА" е тотално, което представя реалната ситуация, че всеки служител е зачислен към някакъв отдел. 

- Частично ограничение за участие (partial).
    - Само някои представители на даден тип обект участвуват в състоянията на определен тип връзка. 
    - На диаграмите това се бележи с единична линия. 
    - Например участието на обекта "СЛУЖИТЕЛ" във връзката "УПРАВЛЯВА" е частично, което означава, че само някои от служителите в предприятието са и ръководители, т.е. не всички са началници. 
